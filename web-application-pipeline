pipeline {
    agent any
    stages { 
        stage('build') {
            steps {
                echo "Building web application. build"
            }
        }
        stage('deploy-staging-environment') {
            steps {
                script{
                    deploy("staging")
                }
            }
        }
        stage('test-staging-environment') {
            steps {
                script{
                    test("staging")
                }
            }
        }
        stage('deploy-production-environment') {
            steps {
                script{
                    deploy("production")
                }
            }
        }
        stage('test-production-environment') {
            steps {
                script{
                    test("production")
                }
            }
        }
    }
}

def deploy(String env) {
    echo "Deployment to ${env} environment triggered ..."
}

def test(String env) {
    echo "Running tests on ${env} environment ..."
    // sh "docker pull acikinovs/mvn_tests:latest"
}
